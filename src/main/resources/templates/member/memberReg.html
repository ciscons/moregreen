<!DOCTYPE html>
<html xmlns:th="http://www.thymleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="apple-touch-icon" sizes="76x76" th:href="@{/img/apple-icon.png}">
<link rel="icon" type="image/png" th:href="@{/img/moregreen.ico}">
  <title>
    회원가입
  </title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
  <!-- Nucleo Icons -->
  <link th:href="@{/css/nucleo-icons.css}" rel="stylesheet" />
  <link th:href="@{/css/nucleo-svg.css}" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <!-- CSS Files -->
  <link id="pagestyle" th:href="@{/css/material-dashboard.css?v=3.0.4}" rel="stylesheet" />
  <style>
  	.olmessagef{color:red;}
  	.olmessaget{color:blue;}
  </style>
<script src="@{/js/jquery-3.6.0.js}"></script>
<script src="@{/js/jquery-3.6.0.min.js}"></script>
<script>
	$(document).ready(function(){
		
		$("#overlappedID").click(function(){
			var id_rule =  /^[a-z0-9]{8,20}/;
			
			if(!id_rule.test($("#m_id").val())){
				alert("아이디를 형식에 맞게 입력해주세요. 소문자+숫자 8자 이상");
				$("m_id").focus();
				return false;
				}
			
			const m_id= $("#m_id").val();
			if(m_id==null|| m_id==""){
				alert("아이디를 입력해주세요")
			} else{
			$("#join").attr("type","button");
			$.ajax({
				type:"get",
				async: false,
				url: "/member/idCheck",
				data: {m_id:m_id},
				success: function(data){
					if(data==1){
						$("#olmessage").text("이미 사용중인 ID입니다.");
						$("#olmessage").addClass("olmessagef");
						$("#olmessage").removeClass("olmessaget");
					} else{
						$("#olmessage").text("사용 가능한 ID입니다.");
						$("#olmessage").addClass("olmessaget");
						$("#olmessage").removeClass("olmessagef");
						$("#join").attr("type", "submit");
					}
				}
			})}
			
		});
		
		 $(".pwConfirm").keyup(function(){
			
			
	        var password=document.getElementById('m_pw');
	        var passwordConfirm=document.getElementById('m_pw_confirm');
	        var confirmMsg=document.getElementById('confirmMsg');
	        var correctColor="blue";
	        var wrongColor="red";
	        if(password.value==passwordConfirm.value){
	            confirmMsg.style.color=correctColor;
	            confirmMsg.innerHTML="비밀번호 일치"
	            	$("#join").attr("type", "submit");
	        } else{
	            confirmMsg.style.color=wrongColor;
	            confirmMsg.innerHTML="비밀번호 불일치";
	            $("#join").attr("type", "button");
	        }
	        

	        });
		  
		
		 $(".overlappedEmail").blur(function(){
				const m_email= $("#m_email").val();
				if(m_email==null|| m_email==""){
					//alert("이메일을 입력해주세요")
				} else{
				$("#join").attr("type","button");
				$.ajax({
					type:"get",
					async: false,
					url: "/member/emailCheck",
					data: {m_email:m_email},
					success: function(data){
						if(data==1){
							$("#olmessage1").text("이미 사용중인 이메일입니다.");
							$("#olmessage1").addClass("olmessagef");
							$("#olmessage1").removeClass("olmessaget");
						} else{
							$("#olmessage1").text("사용 가능한 이메일입니다.");
							$("#olmessage1").addClass("olmessaget");
							$("#olmessage1").removeClass("olmessagef");
							$("#join").attr("type", "submit");
						}
					}
				})
				}
			});
		 
		 $("#m_pw").focusout(function(){
	          var pwcheck = /^(?=.*[0-9])(?=.*[a-zA-Z!@#$%^&*]).{8,20}$/;
	          var confirmMsg1=document.getElementById('confirmMsg1');
	              if(!pwcheck.test($("#m_pw").val())){
	            	  confirmMsg1.style.color="red";
	                 confirmMsg1.innerHTML="영문, 숫자, (특수문자)로 8자이상으로 입력."
	                 } else{
	     	            confirmMsg1.innerHTML="";
	    	         }
	       })
	})
	
</script>
</head>

<body class="bg-gray-200">
  <div class="container position-sticky z-index-sticky top-0">
    <div class="row">
      <div class="col-12">
      </div>
    </div>
  </div>
  <main class="main-content  mt-0">
    <div class="page-header align-items-start min-vh-100" style="background-color: honeydew;">
      <span class="mask opacity-6"></span>
      <div class="container my-auto">
      <div style="text-align: center;">
      	<a  th:href="@{/index}">
			<img th:src="@{/img/logo/logo1.png}" alt="Logo">      	
      	</a>
      </div>
        <div class="row">
          <div class="col-lg-4 col-md-8 col-12 mx-auto">
            <div class="card z-index-0 fadeIn3 fadeInBottom">
              <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                <div class="bg-gradient-primary border-radius-lg py-3 pe-1">
                  <h4 class="text-white font-weight-bolder text-center mt-2 mb-0">회원가입</h4>
                </div>
              </div>
              <div class="card-body">
                <form th:action="@{/member/MemberReg}" method="post" >
                    <div class="input-group input-group-outline mb-3">
                        <input type="text" id=m_id name=m_id class="form-control"
                            placeholder="아이디" >
                        <span th:style="${'color: red;'}" th:text="${valid_m_id}"></span>	
                    </div>
                    <div class="">
                    <button type="button" class="btn btn-lg bg-gradient-primary" id="overlappedID">중복확인</button>
                    <span id="olmessage"></span>
                    </div>
                    <div class="input-group input-group-outline mb-3">
                        <input type="password" id=m_pw name=m_pw placeholder="비밀번호" 
                            class="form-control" >
                            </div>
                        <span id="confirmMsg1"></span>    
                        <span th:style="${'color: red;'}" th:text="${valid_m_pw}"></span>
                    <div class="input-group input-group-outline mb-3">
                        <input type="password" id=m_pw_confirm name=m_pw_confirm placeholder="비밀번호 확인"
                            class="form-control pwConfirm"> 
                        </div>
                            <span id="confirmMsg"></span>
                    <div class="input-group input-group-outline mb-3">
                        <input type="email" name=m_email
                            placeholder="example@xxxx.com" class="form-control overlappedEmail" id="m_email">
                        </div>
                        <span th:style="${'color: red;'}" th:text="${valid_m_email}"></span>
                    	<span id="olmessage1"></span>
                    <div class="text-center">
                        <button type="button" class="btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0" id="join">가입하기</button>
                    </div>
                </form>
            </div>
            <div class="card-footer text-center pt-0 px-lg-2 px-1">
                <p class="mb-2 text-sm mx-auto"> 이미 계정이 있으신가요? 
                	<a th:href="@{/member/memberLogin}" class="text-primary text-gradient font-weight-bold">로그인</a>
                </p>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <!--   Core JS Files   -->
  <script th:src="@{/js/core/popper.min.js}"></script>
  <script th:src="@{/js/core/bootstrap.min.js}"></script>
  <script th:src="@{/js/plugins/perfect-scrollbar.min.js}"></script>
  <script th:src="@{/js/plugins/smooth-scrollbar.min.js}"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script th:src="@{/js/material-dashboard.min.js?v=3.0.4}"></script>
</body>

</html>